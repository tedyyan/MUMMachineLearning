<!DOCTYPE html>
<html>
  <head>
    <title>send.html</title>
	
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <head>
	<style>
	table, th, td {
		border: 1px solid black
		}
	</style>
	</head>
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->

  </head>
  
  <body>
	  <p><h1>Tweeter sentiment analysis</h1></p>

	  <p><h1>Input your text:</h1> </p>
	  <form>
		    
			<textarea rows="4" cols="50" name="yourtext" id="yourtext"></textarea>
			<br>
			<button type="button" onclick="analysistext()">Submit</button>
			<select name="ml">
				<option value="LSTM">LSTM</option>
				<option value="GRU">GRU</option>
			</select>
		</form>
		<p><h1>Test data from tweeter API</h1> </p>
    <form>
    	<label>keyword:</label>
    	<input type="text" name="keyword">
    	
		<label>count:</label>
		<input type="text" name="count">
		
		<label>result_type:</label>
		<select name="result_type">
			<option value=""></option>
			<option value="mixed">mixed</option>
			<option value="popular">popular</option>
			<option value="recent">recent</option>
		</select>
		<button type="button" onclick="send()">Submit</button>
    </form>
	<p><h1><a href="/templatemap">Show me the Positive map</a></h1></p>
	<p><h1><a href="/templatemapneg">Show me the Negative map</a></h1></p>
	<p><h1><a href="/templatemapneg">result map</a></h1></p>
	<table >
			<tr>
					<td>
					Positive:
					</td>	
				</tr>
			{%	for p in pos %}
			<tr>
				<td>
				{{ p }} &nbsp;&nbsp;
				</td>	
			</tr>		
			{%	endfor %}
		
			<tr>
					<td>
					Negative:
					</td>	
				</tr>	
			{%	for p in neg %}
			<tr>
				<td>
				{{ p }} &nbsp;&nbsp;
				</td>	
			</tr>		
			{%	endfor %}
		
	</table>
	
	
	
	<script type="text/javascript">
		function analysistext() {

	        var keyword_ele = document.getElementsByName("yourtext")[0];
	        var yourtext = keyword_ele.value;
			var ml_ele = document.getElementsByName("ml")[0];
	        var ml = ml_ele.value;
	        
	
			var server = "http://localhost:5000/analysistext";
	        var xmlHttp = new XMLHttpRequest();
	        xmlHttp.open("POST", server, true);
			xmlHttp.setRequestHeader("Content-Type", "application/json");
            data = JSON.stringify({"yourtext": yourtext,"ml":ml});
			//datas = {"yourtext":yourtext,"ml":ml}
	        xmlHttp.send(data)
	
	        xmlHttp.onreadystatechange = function () {
	            if (xmlHttp.readyState ==4 && xmlHttp.status ==200){
	                alert(xmlHttp.responseText);
	                //alert(typeof xmlHttp.responseText)	
	            }
	        }	
	 	}
	</script>

	<script type="text/javascript">
		function send() {

	        var keyword_ele = document.getElementsByName("keyword")[0];
	        var keyword = keyword_ele.value;

	        var count_ele = document.getElementsByName("count")[0];
	        var count = count_ele.value;
	        
	        var result_type_ele = document.getElementsByName("result_type")[0];
	        var result_type = result_type_ele.value;
	
			var server = "http://localhost:5000/tweetLearning?keyword=" + keyword + "&count=" + count + "&result_type=" + result_type;
	        var xmlHttp = new XMLHttpRequest();
	        xmlHttp.open("GET", server, true);
	        xmlHttp.send(null);
	
	        xmlHttp.onreadystatechange = function () {
	            if (xmlHttp.readyState ==4 && xmlHttp.status ==200){
	                alert(xmlHttp.responseText);
	                //alert(typeof xmlHttp.responseText)	
	            }
	        }	
	 	}
	</script>
  </body>
</html>
